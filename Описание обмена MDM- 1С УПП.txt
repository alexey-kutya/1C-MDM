ОБМЕН С 1С: УПП

ОБЩЕЕ ОПИСАНИЕ

ИСТОЧНИК: БАЗА 1С: MDM
ПРИЕМНИК: БАЗЫ 1С: УПП
РЕГЛАМЕНТНОЕ ЗАДАНИЕ: Exchange_MDM_to_1C (в базе 1С: MDM)
ПЛАН ОБМЕНА: Обмен_МДМ_УПП
ОБРАБОТКА ВЫГРУЗКИ/ЗАГРУЗКИ: УниверсальныйОбменДаннымиXML
ЛОГ: регистр сведений "ЖурналОбменаMDM" (в базе 1С: MDM)
ПРАВИЛА:
	версия: конвертация данных, редакция 2.1 (2.1.8.1)
	место хранения: регистр сведений "ПравилаОбмена" (в базе 1С: MDM)
	имя: "ExchangeXML"
Правила обмена можно загрузить с помощью обработки ЗагрузитьПравила_МДМ_УПП либо через форму записи регистра сведений "ПравилаОбмена".
ТРАНСПОРТ:
	web-сервис: WebRusAlco (в базах 1С: УПП)
	операция: ПринятьДанные (Данные, ТекстОшибки)
ОБЪЕКТЫ:
	Основные справочники:
		нсиМТР
		нсиКонтрагенты
		Организации
		алкЛицензии
		алкПунктыРазгрузки
		ДоговорыКонтрагентов
		СпецификацииНоменклатуры
		нсиБанковскиеСчета
		ЕдиницыИзмерения
	Регистры сведений:
		КонтактнаяИнформация
ПРАВИЛА РЕГИСТРАЦИИ:

Механизм: ручной
Условия, влияющие на регистрацию:
1. общий реквизит "ПолнаяСинхронизацияMDM"

1.1. входят в состав: регистрация выполняется по значению реквизита объекта
				нсиКонтрагенты
				нсиМТР
				ДоговорыКонтрагентов
				алкЛицензии
				алкПунктыРазгрузки
				СпецификацииНоменклатуры
				нсиБанковскиеСчета
1.2. НЕ входят в состав, зависят от владельца: регистрация выполняется по значению реквизита владельца объекта
				ЕдиницыИзмерения
2. регистр сведений "УчастникиОбмена"

2.1. входят в измерение "Объект": регистрация выполняется в "УзелОбмена" по значению ресурса "Обмен"
				Организации
				нсиКонтрагенты
				нсиМТР
2.2. входят в измерение "Объект", зависят от владельца: регистрация выполняется в "УзелОбмена" по значению ресурса "Обмен" у объекта и его владельца
				ДоговорыКонтрагентов
				СпецификацииНоменклатуры
2.3. НЕ входят в измерение "Объект", зависят от владельца: регистрация выполняется в "УзелОбмена" по значению ресурса "Обмен" у владельца объекта
				алкЛицензии
				алкПунктыРазгрузки
				нсиБанковскиеСчета
				ЕдиницыИзмерения
				регистр сведений "КонтактнаяИнформация"
ОСОБЕННОСТИ ОБЪЕКТОВ

1. Справочник "Организации":
	основное поле синхронизации: GUID
	Реквизит "BaseID": идентификатор базы для получения параметров подключения к web-сервису

2. Справочник "нсиКонтрагенты":
	основное поле синхронизации: GUID
	реквизит "ДоговорКонтрагента" ведётся в разрезе организаций, табличная часть "ОсновныеДоговораКонтрагентов"

3. Справочник "нсиМТР":
	основное поле синхронизации: GUID
	реквизиты "ГосНормативПотерь", "СтатусМатрицы" ведутся в разрезе организаций, табличная часть "РеквизитыПроизводителей"
	реквизит "СсылкаСЭД" ведётся в разрезе организаций, табличная часть "СсылкиСЭД"
	
4. Справочник "ДоговорыКонтрагентов":
	основное поле синхронизации: GUID
	доступность регистра сведений "УчастникиОбмена" зависит от значения "Обмен" у владельца

5. Справочник "ЕдиницыИзмерения":
	основное поле синхронизации: GUID
	при условии Владелец.LocalMaterialType.ГотоваяПродукция = Истина, следующие реквизиты ведутся в разрезе организаций, табличная часть "ЕдиницыПроизводителей":
		Вес
		Объем 
		Коэффициент 
		ОбъемМ3 
		РаскладкаКоличествоПоДлине 
		РаскладкаКоличествоПоШирине 
		РаскладкаКоличествоСлоев 
		Длина 
		Ширина 
		Высота
	
6. Справочник "алкЛицензии":
	основное поле синхронизации: GUID

7. Справочник "алкПунктыРазгрузки":
	основное поле синхронизации: GUID
	реквизит "ОсновнойДоговор" ведётся в разрезе организаций, табличная часть "РеквизитыОрганизаций"

8. Регистр сведений "КонтактнаяИнформация":
	используется для хранения контактов в виде структуры аналогичной конфигурации УПП для справочников:
		Организации
		нсиКонтрагенты
		алкПунктыРазгрузки
